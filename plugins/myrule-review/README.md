# myrule-review

> 「PRにレビューコメント書いといて」「あっ、日本語で」「あと俺の規約も見て」
> 「...毎回言うのめんどくさいな」
>
> そうして生まれたのが、このプラグインです。

## これは何？

Anthropic公式の [`code-review`](https://github.com/anthropics/claude-plugins-official/tree/main/plugins/code-review) プラグインを、**私のルール**で武装させるラッパーです。

公式プラグインの強力なレビューエンジン（並列エージェント、信頼度スコアリング）はそのままに、「毎回口頭で伝えていたあのこだわり」をスキルとして永続化しました。

## 何が違うの？

| | 公式 `code-review` | `myrule-review` |
|---|---|---|
| 起動方法 | PR番号を指定 | **引数不要。今いるブランチから自動検出** |
| 出力先 | PRにコメント投稿 | `notes/code-review-pr{N}.md` に保存 |
| 言語 | 英語 | **日本語** |
| レビュー観点 | バグ、CLAUDE.md準拠、git履歴など | 左記 + **独自コーディング規約** |
| 信頼度80未満 | 捨てる | **参考情報として残す** |
| PRコメント | 自動投稿 | **しない**（頼めばやる） |

## 使い方

```
/myrule-review
```

以上。ブランチを切り替えて、打つだけ。

## 独自規約って何を見るの？

`skills/review-policy/SKILL.md` に定義された11の観点でコードを斬ります:

1. **本質的な処理への集中** - お作法でビジネスロジックを埋もれさせていないか
2. **責務の適切な配置** - バリデーションは入り口で1回だけ
3. **型による不正状態の排除** - そもそもnullが来ない設計になっているか
4. **条件分岐の明確さ** - ガード句、全ケース網羅、説明変数
5. **変数スコープと不変性** - const優先、スコープ最小
6. **防御的プログラミングの適切さ** - 過剰でも不足でもなく
7. **定数とマジックナンバー** - 謎の `42` を許さない
8. **関数設計** - 1関数1責務、引数は5個まで
9. **命名** - `get` じゃなくて `fetch`、`remove` じゃなくて `prune`
10. **コメント** - 「何を」ではなく「なぜ」
11. **エラーハンドリング** - warn と error の使い分け

規約を変えたくなったら `SKILL.md` を編集するだけ。コマンド側の変更は不要です。

## 構成

```
myrule-review/
├── .claude-plugin/
│   └── plugin.json
├── commands/
│   └── myrule-review.md    # 本体。公式を呼び出して独自ルールを重ねる
├── skills/
│   └── review-policy/
│       └── SKILL.md         # 私の規約。育てていくファイル
└── README.md                # 今読んでるやつ
```

## 前提条件

- [code-review](https://github.com/anthropics/claude-plugins-official/tree/main/plugins/code-review) プラグインがインストールされていること
- `gh` CLI が認証済みであること
- 現在のブランチにオープンなPRが存在すること

## FAQ

**Q: 公式の `code-review` が更新されたら？**
A: 自動的に恩恵を受けます。このプラグインは公式コマンドを呼び出しているだけなので。

**Q: PRにコメントしたくなったら？**
A: 「PRにコメントして」と伝えてください。明示的に言わない限り投稿しません。

**Q: 規約を足したい**
A: `skills/review-policy/SKILL.md` を開いて観点を追加してください。プラグインの再インストールは不要です。
