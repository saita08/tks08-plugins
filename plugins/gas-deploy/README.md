# gas-deploy

Google Apps Script のデプロイを管理するプラグインです。

clasp には一つ、初見では気づきにくい仕様があります。`clasp deploy` を実行すると、既存のデプロイメントを更新するのではなく、新しいデプロイメントが作成されます。これにより URL が変わり、既存の連携がすべて壊れます。

このプラグインは、その仕様を知らなくても安全にデプロイできるようにします。

## 使い方

「GAS デプロイして」と言うだけです。

Claude が正しい手順で既存のデプロイメントを更新します：

1. コードをプッシュ
2. 新しいバージョンを作成
3. **既存の**デプロイメントを更新

## 技術的な補足

このプラグインは `clasp deploy` を `-i` フラグ付きで実行するよう Claude に指示します。`-i` は既存デプロイメントの ID を指定するオプションで、これがないと新規作成になります。

ドキュメントを読めばわかることですが、デプロイ直後に「あれ、URL 変わった?」と気づいた時には手遅れです。

## 必要なもの

- JavaScript ランタイム（Bun でも Node.js でも。お好みで）
- clasp (`bun add -g @google/clasp` or `npm install -g @google/clasp`)
- `clasp login` 済みであること
- プロジェクトに `.clasp.json` があること

## 既に事故った場合

`clasp deployments` で古いデプロイメント ID を探し、GAS のエディタから削除してください。今後はこのプラグインを使えば同じ事故は起きません。理論上は。
